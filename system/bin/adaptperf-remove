#!/system/bin/sh
# Adaptive Performance - Remove Game Package

API_PORT=9877
PKG="$1"

[ -z "$PKG" ] && {
    echo "‚ùå Usage: adaptperf-remove <package>"
    echo "Example: adaptperf-remove com.garena.game.df"
    exit 1
}

echo "üóëÔ∏è  Removing game package: $PKG"

PKG_ENCODED=$(echo "$PKG" | sed 's/\./%2E/g')

RESPONSE=$(echo "" | nc 127.0.0.1 $API_PORT << EOF
GET /?action=remove&pkg=$PKG_ENCODED HTTP/1.1
Host: 127.0.0.1
Connection: close

EOF
)

if echo "$RESPONSE" | grep -q '"status":"success"'; then
    echo "‚úÖ Package removed successfully"
else
    echo "‚ùå Failed to remove package"
    echo "$RESPONSE" | grep -o '{.*}'
fi
