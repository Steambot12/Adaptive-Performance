#!/system/bin/sh
# Adaptive Performance - List App Governors

APP_GOVERNORS="/data/adb/modules/adaptive_performance/app_governors.txt"

if [ ! -f "$APP_GOVERNORS" ] || [ ! -s "$APP_GOVERNORS" ]; then
    echo "â„¹ï¸  No custom app governors configured"
    exit 0
fi

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  ğŸ“± CUSTOM APP GOVERNORS                          â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

count=0
while IFS='=' read -r pkg gov; do
    [ -z "$pkg" ] && continue
    pkg=$(echo "$pkg" | tr -d '\r\n\t' | sed 's/^[[:space:]]*//;s/[[:space:]]*$//')
    gov=$(echo "$gov" | tr -d '\r\n\t' | sed 's/^[[:space:]]*//;s/[[:space:]]*$//')
    [ -z "$pkg" ] || [ -z "$gov" ] && continue
    
    count=$((count + 1))
    echo "[$count] $pkg"
    echo "    â””â”€ Governor: $gov"
    echo ""
done < "$APP_GOVERNORS"

if [ $count -eq 0 ]; then
    echo "â„¹ï¸  No custom app governors configured"
else
    echo "Total: $count app(s)"
fi
